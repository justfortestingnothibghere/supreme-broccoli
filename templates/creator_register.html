{% extends 'base.html' %}
{% block title %}Become Creator{% endblock %}
{% block content %}
<h1 class="text-3xl mb-4">Creator Registration</h1>
<form method="post" class="glass p-4 rounded-xl">
    {{ form.hidden_tag() }}
    <div class="mb-4">{{ form.first_name.label }} {{ form.first_name(class="glass p-2 w-full rounded") }}</div>
    <div class="mb-4">{{ form.last_name.label }} {{ form.last_name(class="glass p-2 w-full rounded") }}</div>
    <div class="mb-4">{{ form.email.label }} {{ form.email(class="glass p-2 w-full rounded") }}</div>
    <div class="mb-4">{{ form.password.label }} {{ form.password(class="glass p-2 w-full rounded") }}</div>
    <div class="mb-4">{{ form.phone.label }} {{ form.phone.label(class="glass p-2 w-full rounded") }}</div>
    <div class="mb-4">{{ form.channel_name.label }} {{ form.channel_name(class="glass p-2 w-full rounded") }}</div>
    <div class="mb-4">{{ form.channel_bio.label }} {{ form.channel_bio(class="glass p-2 w-full rounded") }}</div>
    <div class="mb-4">
        <label>Profile Photo</label>
        <button type="button" id="profile-widget" class="bg-purple-500 text-white p-2 rounded">Upload Photo</button>
        {{ form.profile_public_id(id="profile_public_id", class="glass p-2 w-full rounded", placeholder="Public ID") }}
    </div>
    {{ form.submit(class="bg-purple-500 text-white p-2 rounded") }}
</form>

<script src="https://widget.cloudinary.com/v2.0/global/all.js"></script>
<script>
    var profileWidget = cloudinary.createUploadWidget({
        cloudName: '{{ cloud_name or "your_cloud_name" }}',
        uploadPreset: 'unsigned_upload',
        resourceType: 'image',
    }, (error, result) => {
        if (!error && result && result.event === "success") {
            document.getElementById('profile_public_id').value = result.info.public_id;
        }
    });
    document.getElementById("profile-widget").addEventListener("click", function(){
        profileWidget.open();
    }, false);
</script>
{% endblock %}
