{% extends 'base.html' %}
{% block title %}Home{% endblock %}
{% block content %}
<h1 class="text-3xl mb-4">Trending Videos</h1>
<form class="mb-4 flex space-x-2">
    <input name="q" value="{{ q }}" placeholder="Search..." class="glass p-2 rounded flex-1">
    <select name="category" class="glass p-2 rounded">
        <option value="">All Categories</option>
        {% for cat in categories %}
            <option value="{{ cat }}" {% if cat == category %}selected{% endif %}>{{ cat }}</option>
        {% endfor %}
    </select>
    <button type="submit" class="bg-purple-500 text-white p-2 rounded">Search</button>
</form>
<div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4">
    {% for video in videos.items %}
        <div class="glass p-4 rounded-xl card-3d">
            <a href="/video/{{ video.id }}">
                <img src="{{ video.thumbnail_url }}" alt="{{ video.title }}" class="w-full rounded mb-2">
                <h3 class="font-bold">{{ video.title }}</h3>
            </a>
            <a href="/channel/{{ video.uploader_id }}" class="text-sm">{{ video.uploader.channel_name }} {% if video.uploader.verified %}âœ…{% endif %}</a>
            <p class="text-sm">{{ video.views }} views</p>
        </div>
    {% endfor %}
</div>
<!-- Pagination -->
<div class="mt-4 flex justify-center space-x-2">
    {% if videos.has_prev %}<a href="?page={{ videos.prev_num }}&q={{ q }}&category={{ category }}" class="glass p-2 rounded">Prev</a>{% endif %}
    {% if videos.has_next %}<a href="?page={{ videos.next_num }}&q={{ q }}&category={{ category }}" class="glass p-2 rounded">Next</a>{% endif %}
</div>
{% endblock %}